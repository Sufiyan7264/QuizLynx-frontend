<div class="user-dashboard !pt-20">
  <!-- Statistics Cards Section -->
  <div class="stats-section">
    @for(stat of stats; track stat.title){
      <div class="stat-card">
      <div class="stat-header">
        <span class="stat-title">{{ stat.title }}</span>
        <span class="stat-period">{{ stat.period }}</span>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ stat.value }}</span>
        <span class="stat-change" [class.increase]="stat.changeType === 'increase'" [class.decrease]="stat.changeType === 'decrease'">
          <i [class]="stat.changeType === 'increase' ? 'pi pi-arrow-up' : 'pi pi-arrow-down'"></i>
          {{ stat.change }}%
        </span>
      </div>
    </div>
    }
  </div>

  <!-- Main Content Section -->
  <div class="main-content">
    <!-- Left Section -->
    <div class="left-section">
      <!-- Progress Card -->
      <div class="progress-card">
        <div class="progress-content">
          <div class="progress-text">
            <h2 class="progress-milestone">{{ progressData.milestone }}</h2>
            <p class="progress-message">{{ progressData.message }}</p>
            <p class="progress-description">{{ progressData.description }}</p>
          </div>
          <div class="progress-icon">
            <i class="pi pi-trophy"></i>
          </div>
        </div>
        <div class="progress-waves"></div>
      </div>

      <!-- Quiz History Card -->
      <div class="quiz-history-card">
        <div class="card-header">
          <h3 class="card-title">Quiz history</h3>
          <a href="#" class="view-all-link">View all</a>
        </div>
        <table class="quiz-table">
          <thead>
            <tr>
              <th>Subject</th>
              <th>Score</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let quiz of quizHistory">
              <td>{{ quiz.subject }}</td>
              <td>{{ quiz.score }}</td>
              <td>
                <span class="status-badge" [class.completed]="quiz.status === 'Completed'" [class.unattempted]="quiz.status === 'Unattempted'">
                  {{ quiz.status }}
                </span>
              </td>
              <td class="actions-cell">
                <button class="action-btn" *ngIf="quiz.actions.refresh" title="Refresh">
                  <i class="pi pi-refresh"></i>
                </button>
                <button class="action-btn warning" *ngIf="quiz.actions.warning" title="Warning">
                  <i class="pi pi-exclamation-triangle"></i>
                </button>
                <button class="action-btn" *ngIf="quiz.actions.folder" title="View">
                  <i class="pi pi-folder"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Right Section -->
    <div class="right-section">
      <!-- Overall Performance Chart -->
      <div class="performance-card">
        <app-chart-configuration
          [chartType]="'pie'"
          [data]="performanceChartData"
          [width]="'100%'"
          [height]="'210px'"
          [options]="performanceChartOptions">
        </app-chart-configuration>
      </div>

      <!-- Practice Suggestion Card -->
      <div class="practice-card">
        <div class="practice-header">
          <div class="practice-score">{{ practiceSuggestion.score }}</div>
          <span class="practice-tag">{{ practiceSuggestion.subject }}</span>
        </div>
        <p class="practice-message">{{ practiceSuggestion.message }}</p>
        <button class="practice-button">
          New quiz
          <i class="pi pi-arrow-right"></i>
        </button>
      </div>
    </div>
  </div>
</div>
