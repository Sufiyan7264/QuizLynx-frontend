<section
  class="min-h-[100vh] w-full bg-gradient-to-t from-[#fafafa] to-[#a4a4a4] dark:from-[#323232] dark:to-[#000000] relative overflow-hidden flex items-center pt-24 pb-8"
>
  <div
    class="absolute inset-0 bg-[radial-gradient(80%_50%_at_50%_120%,rgba(255,255,255,0.12),transparent_60%)]"
  ></div>

  <div class="relative mx-auto w-full px-4">
    <app-half-circle></app-half-circle>
    <div
      class="mx-auto w-full max-w-[640px] rounded-3xl bg-white/8 ring-1 ring-white/15 backdrop-blur-xl shadow-[0_10px_60px_rgba(0,0,0,0.25)] p-6 md:p-10"
    >
      <div
        class="mx-auto flex h-14 w-14 items-center justify-center rounded-2xl bg-white/15 ring-1 ring-white/20"
      >
        <img loading="lazy" src="assets/single-logo.png" width="28" height="28" alt="QuizLynx" class="filter-icon" />
      </div>

      <h1 class="mt-4 md:mt-6 text-center text-2xl sm:text-3xl md:text-4xl font-semibold text-text">Set New Password</h1>
      <p class="mt-2 md:mt-3 text-center text-sm md:text-base text-muted-text pb-4 md:pb-6 px-4">
        Enter your new password and confirm it to complete the password reset.
      </p>

      <form class="space-y-4 md:space-y-5" [formGroup]="newPasswordForm" (ngSubmit)="updatePassword()">
        <div>
          <label class="mb-2 block text-xs sm:text-sm text-text required">OTP</label>
          <p-inputotp
            formControlName="otp"
            class="place-content-center"
            styleClass="me-2 md:me-4 h-10 md:h-12 !w-10 md:!w-12 !bg-white/40 dark:!bg-black/40 focus:border-1 focus:ring-white/20 !text-text border-1 border-border"
            [invalid]="isInvalid('otp')"
            [length]="6"
          />
          @if (isInvalid('otp')) {
          <div class="text-red-500 ps-3 font-semibold text-xs md:text-sm">OTP is required.</div>
          }
        </div>
        <div>
          <label class="mb-2 block text-xs sm:text-sm text-text required">New Password</label>
          <input
            formControlName="password"
            type="password"
            class="w-full rounded-full bg-white/10 dark:bg-black/10 px-4 md:px-5 py-2 md:py-3 text-sm md:text-base text-white placeholder-white/60 outline-none ring-1 ring-white/20 focus:ring-white/40"
            placeholder="Enter new password"
          />
          @if(newPasswordForm.controls['password'].invalid &&
          newPasswordForm.controls['password'].touched){
          @if(newPasswordForm.controls['password'].errors?.['required']){
          <span class="text-red-500 ps-3 font-semibold text-xs md:text-sm">Password is required</span>
          } @if(newPasswordForm.controls['password'].errors?.['minlength']){
          <span class="text-red-500 ps-3 font-semibold text-xs md:text-sm"
            >Password must be at least 6 characters</span
          >
          } }
        </div>

        <div>
          <label class="mb-2 block text-xs sm:text-sm text-text required">Confirm Password</label>
          <input
            formControlName="confirmPassword"
            type="password"
            class="w-full rounded-full bg-white/10 dark:bg-black/10 px-4 md:px-5 py-2 md:py-3 text-sm md:text-base text-white placeholder-white/60 outline-none ring-1 ring-white/20 focus:ring-white/40"
            placeholder="Confirm new password"
          />
          @if(newPasswordForm.controls['confirmPassword'].invalid &&
          newPasswordForm.controls['confirmPassword'].touched){
          @if(newPasswordForm.controls['confirmPassword'].errors?.['required']){
          <span class="text-red-500 ps-3 font-semibold text-xs md:text-sm"
            >Please confirm your password</span
          >
          } @if(newPasswordForm.controls['confirmPassword'].errors?.['passwordMismatch']){
          <span class="text-red-500 ps-3 font-semibold text-xs md:text-sm">Passwords do not match</span>
          } } @if(newPasswordForm.errors?.['passwordMismatch'] && newPasswordForm.touched){
          <span class="text-red-500 ps-3 font-semibold text-xs md:text-sm">Passwords do not match</span>
          }
        </div>

        <button
          type="submit"
          class="mt-2 w-full rounded-full bg-indigo-600 hover:bg-indigo-700 px-4 md:px-6 py-2 md:py-3 text-sm md:text-base font-medium text-white shadow-lg shadow-black/20"
        >
          Update Password
        </button>
      </form>

      <p class="mt-4 text-center text-xs sm:text-sm text-muted-text px-4">
        Remember your password?
        <a href="/signin" class="text-blue-600 hover:underline">Back to Sign In</a>
      </p>
    </div>
  </div>
</section>
